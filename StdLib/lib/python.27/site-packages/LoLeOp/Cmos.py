#
# Cmos.py
#
# Copyright (C) 2017 efipy.core@gmail.com All rights reserved.
#
# Cmos.py is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 2 of the License.
#
# Cmos.py is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with EfiPy.  If not, see <http://www.gnu.org/licenses/>.
#

from Io import Io8, _MemCell, _MemArray

#
# Index {'name': (Byte, bit)}
#
CmosIndex = {}
# CmosIndex = {
#   'sec'   : ((0x00), slice(0,7)), # tuple (0, 7, 1)
#   'min'   : ((0x02), slice(0,7)), # tuple (0, 7, 1)
#   'hour'  : ((0x04), slice(0,7)), # tuple (0, 7, 1)
#   'date'  : ((0x07), slice(0,7)), # tuple (0, 7, 1)
#   # 'month' : ((0x08), slice(0,7)), # tuple (0, 7, 1)
#   'year'  : ((0x09), slice(0,7)), # tuple (0, 7, 1)
#   # 'year' : ((0x09), (0,7))  # tuple (0, 7)
#   }

class CmosIo (_MemCell):

  def MemSet (self, index, value):

      Io8[0x70] = index
      Io8[0x71] = value
      return value

  def MemGet (self, index):

      Io8[0x70] = index
      return int(Io8[0x71])

Cmos = _MemArray ("Cmos", 8, CellClass = CmosIo, DictKey = CmosIndex)
