# Xeon5600Msr.py
#
# Copyright (C) 2017 efipy.core@gmailcom All rights reserved.
#
# Xeon5600Msr.py is free software: you can redistribute it and/or
# modify it under the terms of the GNU General Public License as published by
# the Free Software Foundation, version 2 of the License.
#
# EfiPy is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with EfiPy.  If not, see <http://www.gnu.org/licenses/>.
#

from EfiPy                      import *

def IS_XEON_5600_PROCESSOR(DisplayFamily, DisplayModel):
  return ((DisplayFamily == 0x06) and \
         (                            \
           (DisplayModel == 0x25) or  \
           (DisplayModel == 0x2C)     \
           )                          \
         )

MSR_XEON_5600_FEATURE_CONFIG             = 0x0000013C
class MSR_XEON_5600_FEATURE_CONFIG_REGISTER_Bits (Structure):
  _fields_ = [
    ("AESConfiguration",  UINT32, 2),
    ("Reserved1",         UINT32, 30),
    ("Reserved2",         UINT32, 32),
  ]

class MSR_XEON_5600_FEATURE_CONFIG_REGISTER (Union):
  _fields_ = [
    ("Bits",      MSR_XEON_5600_FEATURE_CONFIG_REGISTER_Bits),
    ("Uint32",    UINT32),
    ("Uint64",    UINT64)
  ]

MSR_XEON_5600_OFFCORE_RSP_1              = 0x000001A7
MSR_XEON_5600_TURBO_RATIO_LIMIT          = 0x000001AD
class MSR_XEON_5600_TURBO_RATIO_LIMIT_REGISTER_Bits (Structure):
  _fields_ = [
    ("Maximum1C", UINT32, 8),
    ("Maximum2C", UINT32, 8),
    ("Maximum3C", UINT32, 8),
    ("Maximum4C", UINT32, 8),
    ("Maximum5C", UINT32, 8),
    ("Maximum6C", UINT32, 8),
    ("Reserved",  UINT32, 16),
  ]

class MSR_XEON_5600_TURBO_RATIO_LIMIT_REGISTER (Union):
  _fields_ = [
    ("Bits",      MSR_XEON_5600_TURBO_RATIO_LIMIT_REGISTER_Bits),
    ("Uint64",    UINT64)
  ]

MSR_XEON_5600_IA32_ENERGY_PERF_BIAS      = 0x000001B0
